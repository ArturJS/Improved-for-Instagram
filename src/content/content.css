:root {
	--boxHeight: 1045px;
	--boxWidth: 23vw;
	--boxMarginRight: 10px;
}

body {
	font-size: 15px !important; /** we're on desktop, okay? */
	overflow-y: unset !important; /** de-opts scrolling */
}

/*----------  Performance  ----------*/
/** Outer parent of the image */
header + div,
video {
	contain: layout style;
}

form > textarea,
header > a {
	contain: strict;
}

/** Improve picture quality */
div > img {
	contain: strict;
	/** Moves the img over the "prevent right click copy"-element */
	z-index: 1;
	/* autoprefixer: off */
	image-rendering: -webkit-optimize-contrast;
}

/** Likes & comments amount */
a:hover > div + div {
	z-index: 2;
}

img + video {
	z-index: 2;
}

/** Remove width limit */
main > section {
	flex-direction: column !important;
	max-width: none !important;
	margin: 0 !important;
	padding: 0 !important;
	z-index: 1;
}

/** Make the flex box layout row instead of column */
main > section > div:not(#rcr-anchor) > div:not([class]) > div {
	flex-direction: row !important;
	flex-wrap: wrap;
	justify-content: center;
	width: 100%;
	max-width: 100%;
	margin-top: 10px !important;
	contain: layout style;
}

/**
 * Previous DOM structure
 * @deprecated @TODO
 */
main > section > div:not(#rcr-anchor) > div:not([class]) > div:first-child > div {
	flex-direction: row !important;
	flex-wrap: wrap;
	justify-content: center;
	width: 100%;
	max-width: 100%;
	margin-top: 10px !important;
	contain: layout style;
}

/** Make boxes equal in height and width */
main > section div > article {
	width: var(--boxWidth) !important;
	min-width: var(--boxWidth) !important;
	max-width: var(--boxWidth) !important;
	height: auto;
	max-height: 70rem;
	margin-right: var(--boxMarginRight) !important;
	margin-bottom: 10px !important;
	contain: layout style;
	z-index: 1;
}

/*=============================================
						Slimmer Post Header
=============================================*/
body > div > div[role='dialog'] article > header,
#react-root:not(.profile):not(.explore) article > header {
	height: 50px !important;
	padding: 16px 8px !important;
	contain: strict;
}

body > div > div[role='dialog'] article > header,
#react-root.post article > header {
	right: 8px;
	width: 305px;
}

body > div > div[role='dialog'] article > header {
	padding: 16px 4px !important;
}

div > main:first-child {
	margin-top: 10px !important;
}

div > main:only-child {
	flex-grow: 1;
}

body > div > div[role='dialog'] header + div + div,
.post header + div + div {
	top: 55px !important;
}

/*----------  Improve new post layout  ----------*/
/** Row layout */
body > div > div[role='dialog'] header + div + div,
#react-root:not(.profile) header + div + div {
	/* @TODO: Min Chrome v60 */
	display: grid;
	flex: auto;
	flex-direction: row;
	flex-wrap: wrap;
	align-content: normal;
	height: max-content;
	padding: 8px 12px 0 !important;
	contain: layout style;
	grid-template:
		'date likes' min-content
		'c c' auto
		'buttons comment' min-content
		/ auto 2fr;
}

body > div > div[role='dialog'] header + div + div,
#react-root.post header + div + div {
	height: auto !important;
	padding: 0 8px 0 24px !important;

	grid-template:
		'date likes' min-content
		'c c' 80%
		'buttons comment' min-content
		/ auto 2fr;
}

/** Views / likes */
div > section + section {
	flex: 999 1 50%;
	align-self: flex-start;
	order: 1 !important;
	max-width: 100%;
	text-align: right;
	grid-area: likes;
}

/** Posted date */
div > section + div + div {
	flex: 1 1 auto;
	/* higher than views / likes to push it to the right */
	order: 0 !important;
	margin-bottom: 4px !important;
	grid-area: date;
}

/** Larger timestamp */
div > a > time {
	font-size: 14px !important;
	text-transform: none;
}

/** Grow comments */
body > div > div[role='dialog'] header + div + div > div:first-of-type:not(:only-child),
#react-root:not(.stories) header + div + div > div:first-of-type:not(:only-child) {
	flex-grow: 1;
	order: 2 !important;
	width: 100%;
	height: 100%;
	margin: 0 !important;
	padding: 0 !important;
	overflow: hidden;
	/* max-height & height unset */

	contain: content;
	grid-area: c;
}

body > div > div[role='dialog'] header + div + div > div:first-of-type:not(:only-child) > ul,
#react-root:not(.stories) header + div + div > div:first-of-type:not(:only-child) > ul {
	overflow-x: hidden;
	overflow-y: auto;
}

/** Heart / Comment / Save */
header + div + div > section:first-child {
	align-self: flex-end;
	order: 4 !important;
	width: auto;
	min-height: 56px;
	margin-top: 0 !important;
	margin-right: 8px !important;
	border-top: 1px solid #efefef;
	grid-area: buttons;
}

/** Hide useless comment icon */
section > a[role='button']:first-child + a[role='button']:not([aria-disabled]),
article > div > section > span:first-child + span {
	display: none;
}

/** Save button */
article > div > section > span + span + span:last-child {
	display: flex;
	margin-left: -8px;
}

/** Heart */
header + div + div > section:first-child > span:first-child {
	display: flex;
}

/** "Add comment" */
header + div + div > section:last-child {
	flex: 1;
	align-self: flex-end;
	order: 5;
	width: auto;
	margin-top: 0;
	padding-right: 0 !important;
	grid-area: comment;
}

/*=============================================
								Media Controls
=============================================*/
/** Always show media controls when playing */
video::-webkit-media-controls-overlay-enclosure,
video[loop]::-webkit-media-controls-enclosure,
video[loop]::-webkit-media-controls,
video::-internal-media-controls-overflow-menu-list {
	z-index: 5;
}

video[loop] {
	z-index: 4;
}

video::-webkit-media-controls {
	display: flex !important;
	contain: strict;
	z-index: 1;
}

/** @TODO: Replace IG's play button with the native one once its been rolled out */
body > div > div[role='dialog'] video:not([loop])::-webkit-media-controls-overlay-play-button,
#react-root:not(.stories) video:not([loop])::-webkit-media-controls-overlay-play-button {
	display: none;
}

/** Tags not showing issues/#17 */
div > div + a + div,
div > div + [style][href],
div > div + [style][href] ~ a,

/** Sprites */
/*#react-root:not(.profile) div[role='button'] + div, /* Heart Animation */
.coreSpriteSidecarIconLarge, /* @TODO: Update me */
div[role='button'] ~ a, /* Multiple dots arrows */
div[role='button'] ~ a ~ div, /* Multiple videos/images dots */
div[role='button'] > div[role='dialog'] > div + div > div + div > span, /* Tiny video icon */
div[role='button'] > div[role='dialog'] > div + div > div + div + a, /* Big video icon */
.coreSpriteLikeAnimationHeart,
.coreSpriteSidecarIconLarge,
.coreSpriteUserTagIndicator,
.coreSpriteVideoIconLarge,
.coreSpriteRightChevron,
.videoSpritePlayButton,
.coreSpriteLeftChevron {
	z-index: 3;
}

div[role='button']:hover ~ a {
	opacity: 1;
}

div[role='button'] > div {
	contain: layout style;
}

/** Multiple dots */
div > div + .coreSpriteRightChevron + div,
div > div + .coreSpriteLeftChevron + div {
	margin-bottom: 0;
}

/*=============================================
						Mark Videos in the Feed
=============================================*/
/** Outer div */
.home article > div > div > div > div > div + div:not(:last-child) {
	contain: content;
	z-index: 3;
}

/** Small play button */
.home article > div > div > div > div > div + div:not(:last-child) > div + div {
	opacity: 1 !important;
}

.home article > div > div > div > div > div + div:not(:last-child) > div + div > span {
	right: initial;
	left: 0;
}

/** Hide "Click video for audio" */
.home article > div > div > div > div > div + div:not(:last-child) > div:first-child {
	display: none;
}

/*=============================================
										Nav Bar
=============================================*/
section > nav,
section > nav > div,
section > nav > div:first-child {
	width: 0;
}

nav > div + div > div {
	contain: layout style; /** See issues#16 */
	z-index: 9 !important;
	/*will-change: transform; composited already anyway */
}

/** Hide "Open in App" */
nav > div > div > div:last-of-type:not(:only-child) {
	display: none;
}

/** Search arrow */
nav input + span + div + div > div:first-of-type {
	border: solid 11px #e6e6e6;
}

/*=============================================
										Stories
=============================================*/
/** Fix main feed */
main > section > div:first-child:not(#rcr-anchor) {
	max-width: none;
	margin-right: 0;
	float: none;
}

main > section > div:first-child:not(#rcr-anchor) ~ div:last-child {
	position: static;
	flex-direction: row;
	flex-wrap: wrap;
	order: -1;
	width: 100%;
	max-width: 100%;
	height: auto;
	/*max-height: 150px;*/
	margin-bottom: 0;
	contain: layout style;
}

/** All children
main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > div {
	flex: 1 100%;
}
*/
main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > hr {
	display: none;
}

/** Owners Story */
main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > div:first-child {
	/**! @TODO: Temporary */
	display: none;

	flex: 1 auto;
	order: 1;
	width: auto;
	margin-right: 5px;
}

/* Stories / watch all */
main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > hr:first-of-type + div {
	justify-content: start;
	order: -1;
	width: 100%;
}

main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > hr:first-of-type + div > :last-child {
	margin: 0 5px;
}

/** Story items container */
main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > hr:first-of-type + div + div {
	width: 100%;
	height: 80px !important; /** @TODO: Enlargen story items */
	margin-bottom: -5px;
	overflow-x: scroll !important;
	overflow-y: hidden !important;
}

/** Stories virtual list */
main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > hr:first-of-type + div + div > div {
	height: 68px !important;
	contain: strict;
	overflow-x: scroll !important;
	overflow-y: hidden !important;
}

main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > hr:first-of-type + div + div > div > div {
	flex-direction: row !important;
}

/** Other Stories
main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > hr:first-of-type + div + div {
	flex: 9999 0px;
	flex-direction: row;
	flex-wrap: nowrap;
	order: 2;
	width: 100%;
	max-width: 100%;
	height: auto;
	padding: 0 0 5px;
	overflow-x: auto;
	overflow-y: auto;
}

/** Other stories container
main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > hr:first-of-type + div + div > div {
	flex-direction: row;
	flex-wrap: nowrap;
	width: 100%;
	max-width: 100%;
	height: auto;
	max-height: 150px;
	overflow-x: auto;
}

/** Story Items
main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > hr:first-of-type + div + div > div > div {
	position: static;
	flex-flow: row nowrap;
	width: auto;
	margin-right: 5px;
}

/** Story Items Inner
main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > hr:first-of-type + div + div > div > div > a,
main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > hr:first-of-type + div + div > div > div > div:last-child * {
	width: auto;
	max-width: none;
}

/** Nav */
main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > hr + div:last-child {
	display: block;
	position: absolute;
	bottom: 0;
	width: 100%;
	padding-bottom: 0;
	text-align: center;
}

main > section > div:first-child:not(#rcr-anchor) ~ div:last-child > hr + div:last-child > nav {
	display: inline-block;
	margin-bottom: 0;
}

/*=============================================
										Spinner
=============================================*/
/** Profile spinner */
.home main > section > div:not(#rcr-anchor):first-child > div:last-child:not(:first-child) {
	order: 3;
	height: 60px;
	margin: 10px 0;
	contain: strict;
	z-index: 2;
}

.home main > section > div:not(#rcr-anchor):first-child > div:last-child:not(:first-child) > div {
	top: 30%;
}

/*=============================================
										Toast
=============================================*/
section > footer + div {
	contain: content;
}

/*=============================================
										Post
=============================================*/
/** Enlargen modal */
body > div > div[role='dialog'] article,
.post article {
	min-height: 50vh;
	max-height: 90vh;
	margin-bottom: 0;
	contain: layout style;
}

body > div > div[role='dialog'] > div > div {
	/* max-width: 52vh !important; */
	/* max-width: 935px; /* container size */
}

/** Arrow container */
body > div > div[role='dialog'] > div:first-child > div > div {
	/* max-width: 52vh !important; */
}

body > div > div[role='dialog'] article > header + div {
	margin-right: 320px !important;
}

/** Center the image */
body > div > div[role='dialog'] article,
#react-root:not(.home) article {
	flex-grow: 1;
	justify-content: center;
}

.post > section > main {
	justify-content: center;
}

/** Sometimes IG sets a max-width on elements */
.post > section > main > div {
	flex-grow: 0;
	max-width: 51vw !important;
	padding-top: 10px;
	padding-right: 0;
	padding-bottom: 10px;
	padding-left: 0;
}

.post > section > main > div > div {
	flex-grow: 1;
	flex-shrink: 1;
}

/** More image, less wasted space */
.post header + div {
	margin-right: 322px !important;
}

/*=============================================
									Profile
=============================================*/
/** Show likes and so on on hover */
.profile a:hover > div:last-child {
	z-index: 3;
}

/*=============================================
									Footer
=============================================*/
footer > div {
	max-width: fit-content !important;
	padding: 0 !important;
}

footer > div > nav {
	margin: auto;
}

/*=============================================
									Extended
=============================================*/
.extended--btn {
	transform: translateY(1px) scale(2);
	text-shadow: 0 0 2px #2196f3;
}

/** Extended Marker */
.extended--btn__new::after {
	position: absolute;
	right: 0;
	bottom: 0;
	left: 0;
	width: 4px;
	height: 4px;
	margin: 0 auto;
	border-radius: 2px;
	background: #03a9f4;
	content: '';
}

.ige_watch::before,
.ige_watched::before {
	display: inline-block;
	position: absolute;
	padding: 0.25em 0.4em;
	transform: translateY(-15px);
	border-radius: 0.25rem;
	background-color: #6c757d;
	color: #fff;
	font-size: 12px;
	font-weight: 700;
	line-height: 1;
	text-align: center;
	white-space: nowrap;
	content: 'Watch';
	cursor: pointer;
	vertical-align: baseline;
}

.ige_watch::before {
	background-color: #007bff;
}

.ige_watched::before {
	content: 'Watching ' attr(data-ige-watched);
}

/*=============================================
										Options
=============================================*/

/*----------  Picture Only Mode  ----------*/
.ige_picturesOnly:not(.profile):not(.explore) article > header {
	height: 40px !important;
}

.ige_picturesOnly:not(.profile):not(.explore) article > header > div:last-child > div:last-child {
	display: flex;
}

.ige_picturesOnly:not(.stories) header + div + div > div:first-of-type:not(:only-child) {
	height: 0;
}

/* Hide comments */
.ige_picturesOnly header + div + div > div:first-of-type:not(:only-child) > ul {
	display: none;
}

/*----------  Hide Stories  ----------*/
.ige_hideStories main > section > div:first-child:not(#rcr-anchor) ~ div:last-child {
	display: none;
}

/*----------  NoSpaceBetweenPosts  ----------*/
.ige_noSpaceBetweenPosts main > section div > article {
	margin: 0 !important;
	border-bottom: 0 !important;
	border-radius: 0 !important;
}

.ige_noSpaceBetweenPosts main > section div > article:not(:nth-child(4n)) {
	border-right: 0 !important;
}

/* @TODO: Make this work for 2 row layout too */
.ige_noSpaceBetweenPosts main > section div > article:not(:first-child):not(:nth-child(5n)) {
	border-left: 0 !important;
}

.ige_noSpaceBetweenPosts main > section > div:not(#rcr-anchor) > div:not([class]) > div {
	justify-content: center;
}

/*=============================================
						"Chrome IG Story" fixes
=============================================*/
#rcr-anchor {
	justify-content: flex-start;
	margin-bottom: -20px;
	overflow: auto;
	contain: content;
}

#rcr-anchor > div {
	margin-bottom: 0;
}

/*=============================================
									Media Querys
=============================================*/
@media (max-width: 1366px) {
	:root {
	}

	main > section > div:not(#rcr-anchor) > div:not([class]) > div {
		justify-content: space-evenly;
	}

	.post > section > main > div {
		max-width: 75vw !important;
	}
}

/*=============================================
								Mac OS Scrollbar
=============================================*/
::-webkit-scrollbar {
	width: 9px;
	border-radius: 100px;
	background-color: rgba(0, 0, 0, 0);
	contain: strict;
	/*transition: background-color 1s linear;*/
}

::-webkit-scrollbar:horizontal {
	height: 9px;
}

/* hover effect for both scrollbar area, and scrollbar 'thumb' */
::-webkit-scrollbar:hover {
	background-color: rgba(0, 0, 0, 0.07);
}

/* The scrollbar 'thumb' ...that marque oval shape in a scrollbar */
::-webkit-scrollbar-thumb {
	/*transition: background-color 1s linear;*/
}

::-webkit-scrollbar-thumb:vertical,
::-webkit-scrollbar-thumb:horizontal {
	min-height: 30px;
	border: 2px solid rgba(0, 0, 0, 0);
	border-radius: 100px;
	background-color: #afafaf;
	background-clip: padding-box;
}

::-webkit-scrollbar-thumb:vertical:active,
::-webkit-scrollbar-thumb:horizontal:active {
	border-radius: 100px;
	background-color: #727272; /* Some darker color when you click it */
}
